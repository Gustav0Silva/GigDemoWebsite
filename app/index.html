<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">
    <head>
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,700,700i" rel="stylesheet" />
        <title>Gig DevOps Demo</title>
        <style type="text/css" media="screen">
            /* Linked Styles */
            body { padding:0 !important; margin:0 !important; display:block !important; min-width:100% !important; width:100% !important; background:#001736; -webkit-text-size-adjust:none }
            a { color:#66c7ff; text-decoration:none }
            p { padding:0 !important; margin:0 !important } 
            img { -ms-interpolation-mode: bicubic; /* Allow smoother rendering of resized image in Internet Explorer */ }
            .mcnPreviewText { display: none !important; }
    



                    
            /* Mobile styles */
            @media only screen and (max-device-width: 480px), only screen and (max-width: 480px) {
                .mobile-shell { width: 100% !important; min-width: 100% !important; }
                .bg { background-size: 100% auto !important; -webkit-background-size: 100% auto !important; }
                
                .text-header,
                .m-center { text-align: center !important; }
                
                .center { margin: 0 auto !important; }
                .container { padding: 20px 10px !important }
                
                .td { width: 100% !important; min-width: 100% !important; }
    
                .m-br-15 { height: 15px !important; }
                .p30-15 { padding: 30px 15px !important; }
    
                .m-td,
                .m-hide { display: none !important; width: 0 !important; height: 0 !important; font-size: 0 !important; line-height: 0 !important; min-height: 0 !important; }
    
                .m-block { display: block !important; }
    
                .fluid-img img { width: 100% !important; max-width: 100% !important; height: auto !important; }
    
                .column,
                .column-top,
                .column-empty,
                .column-empty2,
                .column-dir-top { float: left !important; width: 100% !important; display: block !important; }
    
                .column-empty { padding-bottom: 10px !important; }
                .column-empty2 { padding-bottom: 30px !important; }
    
                .content-spacing { width: 15px !important; }
            }

            
        </style>

        <style>
        #container h3{
            color: white;
        }
        #container-edit input {
            height: 32px;
        }
        #container-edit hr {
            margin: 25px 0;
        }
        #container-edit input {
            width: 195px;
            font-size: 15px;
        }
        </style>
    </head>
<script>
    var host = window.location.host;
    (async function init() {
        const response = await fetch('http://' + host + '/get-profile');
        console.log("response", response);
        const user = await response.json();
        console.log(JSON.stringify(user));

        document.getElementById('name').textContent = user.name ? user.name : 'Anna Smith';
        document.getElementById('email').textContent = user.email ? user.email : 'anna.smith@example.com';
        document.getElementById('interests').textContent = user.interests ? user.interests : 'coding';

        const cont = document.getElementById('container');
        cont.style.display = 'block';
    })();

    async function handleUpdateProfileRequest() {
        const contEdit = document.getElementById('container-edit');
        const cont = document.getElementById('container');

        const payload = {
            name: document.getElementById('input-name').value, 
            email: document.getElementById('input-email').value, 
            interests: document.getElementById('input-interests').value
        };
        
        const response = await fetch('http://' + host + '/update-profile', {
            method: "POST",
            headers: {
              'Accept': 'application/json',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        });
        const jsonResponse = await response.json();

        document.getElementById('name').textContent = jsonResponse.name;
        document.getElementById('email').textContent = jsonResponse.email;
        document.getElementById('interests').textContent = jsonResponse.interests;

        cont.style.display = 'block';
        contEdit.style.display = 'none';
    }

    function updateProfile() {
        const contEdit = document.getElementById('container-edit');
        const cont = document.getElementById('container');

        document.getElementById('input-name').value = document.getElementById('name').textContent;
        document.getElementById('input-email').value = document.getElementById('email').textContent;
        document.getElementById('input-interests').value = document.getElementById('interests').textContent;

        cont.style.display = 'none';
        contEdit.style.display = 'block';
    }
</script>

<body class="body" style="padding:0 !important; margin:0 !important; display:block !important; min-width:100% !important; width:100% !important; background:#001736; -webkit-text-size-adjust:none;">
	<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#001736">
		<tr>
			<td align="center" valign="top">
				<table width="650" border="0" cellspacing="0" cellpadding="0" class="mobile-shell">
					<tr>
						<td class="td container" style="width:650px; min-width:650px; font-size:0pt; line-height:0pt; margin:0; font-weight:normal; padding:55px 0px;">
							<!-- Header -->
							<table width="100%" border="0" cellspacing="0" cellpadding="0">
								<tr>
									<td class="p30-15" style="padding: 0px 30px 30px 30px;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0">
											<tr>
												<th class="column-top" width="145" style="font-size:0pt; line-height:0pt; padding:0; margin:0; font-weight:normal; vertical-align:top;">
													<table width="100%" border="0" cellspacing="0" cellpadding="0">
														<tr>
															<td class="img m-center" style="font-size:0pt; line-height:0pt; text-align:left;"><img src="https://www.gig.com/wp-content/uploads/2021/03/Vector.png" width="93" height="38" border="0" alt="" /></td>
														</tr>
													</table>
												</th>
												<th class="column-empty" width="1" style="font-size:0pt; line-height:0pt; padding:0; margin:0; font-weight:normal; vertical-align:top;"></th>
												<th class="column" style="font-size:0pt; line-height:0pt; padding:0; margin:0; font-weight:normal;">
													<table width="100%" border="0" cellspacing="0" cellpadding="0">
														<tr>
															<td class="img m-center" style="font-size:0pt; line-height:0pt; text-align:right;"><img src="https://i.ibb.co/DtywcRv/DevOps.png" width="72" height="38" border="0" alt="" /></td>
														</tr>
													</table>
												</th>
											</tr>
										</table>
									</td>
								</tr>
							</table>
							<!-- END Header -->

							<!-- Intro -->
							<table width="100%" border="0" cellspacing="0" cellpadding="0">
								<tr>
									<td style="padding-bottom: 10px;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0">
											<tr>
												<td class="tbrr p30-15" style="padding: 60px 30px; border-radius:26px 26px 0px 0px;" bgcolor="#12325c">
													<table width="100%" border="0" cellspacing="0" cellpadding="0">
														<tr>
															<td class="h1 pb25" style="color:#ffffff; font-family:'Muli', Arial,sans-serif; font-size:40px; line-height:46px; text-align:center; padding-bottom:25px;">Welcome, Luke and Stavros</td>
														</tr>
														<tr>
															<td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:16px; line-height:30px; text-align:center; padding-bottom:25px;">Below you will find a small DevOps Demo <span class="m-hide"><br /></span>
																
																<ul style="list-style-type:none;">
																	<li>Tools integrated:</li>
																	<li>GitHub</li>
																	<li>TeamCity</li>
																	<li>DockerHub</li>
																	<li>AWS ECR</li>
																	<li>Docker</li>
																	<li>Kubernetes</li>
																	<li>Octopus Deploy</li>
																</ul>
															</td>
														</tr>
													</table>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
							<!-- END Intro -->			

                            <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#12325c">
								<tr>
									<td class="p30-15" style="padding: 50px 30px;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0">
											<tr>
												<th class="column-top" width="180" style="font-size:0pt; line-height:0pt; padding:0; margin:0; font-weight:normal; vertical-align:top;">
													<table width="100%" border="0" cellspacing="0" cellpadding="0">
														<tr>
															<td class="fluid-img" style="font-size:0pt; line-height:0pt; text-align:left;"><img src='profile-picture' alt="user-profile" width="180" height="280" border="0"/></td>
														</tr>
													</table>
												</th>
												<th class="column-empty2" width="30" style="font-size:0pt; line-height:0pt; padding:0; margin:0; font-weight:normal; vertical-align:top;"></th>
												<th class="column-top" width="380" style="font-size:0pt; line-height:0pt; padding:0; margin:0; font-weight:normal; vertical-align:top;">
													<table width="100%" border="0" cellspacing="0" cellpadding="0" style="display:block"  class='container' id='container'>
                                                        <tr>
                                                            <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:18px; line-height:30px; text-align:left; padding-bottom:10px;"><h3>User profile</h3></td>
                                                        </tr>
                                                            <tr>
                                                                <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:30px; text-align:left; padding-bottom:5px;"><span>Name: </span><span id='name'>Anna Smith</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:30px; text-align:left; padding-bottom:5px;"><span>Email: </span><span id='email'>anna.smith@example.com</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:30px; text-align:left; padding-bottom:5px;"><span>Interests: </span><span width="200" id='interests'>coding</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td><button  class="dark-blue-button2 text-button" style="background:#021a3d; color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:18px; padding:12px 30px; text-align:center; border-radius:0px 22px 22px 22px; font-weight:bold;" class='button' onclick="updateProfile()">Edit Profile</button></td>
                                                            </tr>
                                                    </table>
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="display:none"  class='container' id='container-edit'>
                                                        <tr>
                                                            <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:18px; line-height:30px; text-align:left; padding-bottom:10px;"><h3>User profile</h3></td>
                                                        </tr>
                                                            <tr>
                                                                <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:30px; text-align:left; padding-bottom:5px;"><span>Name: </span><label for='input-name'></label><input width="200" type="text" id='input-name' value='Anna Smith' /></td>
                                                            </tr>
                                                            <tr>
                                                                <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:30px; text-align:left; padding-bottom:5px;"><span>Email: </span><label for='input-email'></label><input width="200" type="email" id='input-email' value='anna.smith@example.com' /></td>
                                                            </tr>
                                                            <tr>
                                                                <td class="text-left pb25" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:30px; text-align:left; padding-bottom:5px;"><span>Interests: </span><label for='input-interests'></label><input width="200" type="text" id='input-interests' value='coding' /></td>
                                                            </tr>
                                                            <tr>
                                                                <td><button  class="dark-blue-button2 text-button" style="background:#021a3d; color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:14px; line-height:18px; padding:12px 30px; text-align:center; border-radius:0px 22px 22px 22px; font-weight:bold;" class='button' onclick="handleUpdateProfileRequest()">Update Profile</button></td>
                                                            </tr>
													</table>
												</th>
											</tr>
										</table>
									</td>
								</tr>
							</table>
                            


							<!-- Footer -->
							<table width="100%" border="0" cellspacing="0" cellpadding="0">
								<tr>
									<td class="p30-15 bbrr" style="padding: 50px 30px; border-radius:0px 0px 26px 26px;" bgcolor="#0e264b">
										<table width="100%" border="0" cellspacing="0" cellpadding="0">
											<tr>
												<td class="text-footer1 pb10" style="color:#c1cddc; font-family:'Muli', Arial,sans-serif; font-size:16px; line-height:20px; text-align:center; padding-bottom:10px;">Demo by Gustavo Silva</td>
											</tr>
											<tr>
												<td class="text-footer2" style="color:#8297b3; font-family:'Muli', Arial,sans-serif; font-size:12px; line-height:26px; text-align:center;">Future DevOps Engineer for GiG?</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
							<!-- END Footer -->
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
</body>
</html>